From 4618576229c6335bb498d80b65c3f3f870822316 Mon Sep 17 00:00:00 2001
From: "re:fi.64" <hello@refi64.dev>
Date: Wed, 28 May 2025 16:41:30 -0500
Subject: [PATCH] build: Only check rustc_revision when using Chromium's Rust
 toolchain

---
 build/config/compiler/BUILD.gn | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/build/config/compiler/BUILD.gn b/build/config/compiler/BUILD.gn
index 078c04943c133..02617933d60b7 100644
--- a/build/config/compiler/BUILD.gn
+++ b/build/config/compiler/BUILD.gn
@@ -1801,7 +1801,7 @@ config("clang_revision") {
     }
 
     if (toolchain_has_rust && _perform_consistency_checks &&
-        !rust_force_head_revision) {
+        use_chromium_rust_toolchain && !rust_force_head_revision) {
       # Ensure that the synced rust version matches what's in git.
       _rust_revision_lines =
           filter_include(read_file("//tools/rust/update_rust.py", "list lines"),
-- 
2.51.0

