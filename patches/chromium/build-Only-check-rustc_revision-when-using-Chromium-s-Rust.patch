From ae6e7c73c7d9950112f1fcb3201b0d51a15e3286 Mon Sep 17 00:00:00 2001
From: "re:fi.64" <hello@refi64.dev>
Date: Wed, 28 May 2025 16:41:30 -0500
Subject: [PATCH] build: Only check rustc_revision when using Chromium's Rust
 toolchain

---
 build/config/compiler/BUILD.gn | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/build/config/compiler/BUILD.gn b/build/config/compiler/BUILD.gn
index 7f709b518a91a..ec9ad90d5744f 100644
--- a/build/config/compiler/BUILD.gn
+++ b/build/config/compiler/BUILD.gn
@@ -1789,7 +1789,7 @@ config("clang_revision") {
     }
 
     if (toolchain_has_rust && _perform_consistency_checks &&
-        !rust_force_head_revision) {
+        use_chromium_rust_toolchain && !rust_force_head_revision) {
       # Ensure that the synced rust version matches what's in git.
       _rust_revision_lines =
           filter_include(read_file("//tools/rust/update_rust.py", "list lines"),
-- 
2.51.2

