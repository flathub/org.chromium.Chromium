From 43421e5bb5f04b2c17cf0ef343b52dc671263501 Mon Sep 17 00:00:00 2001
From: "re:fi.64" <hello@refi64.dev>
Date: Wed, 28 May 2025 16:41:30 -0500
Subject: [PATCH] build: Only check rustc_revision when using Chromium's Rust
 toolchain

---
 build/config/compiler/BUILD.gn | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/build/config/compiler/BUILD.gn b/build/config/compiler/BUILD.gn
index c09c9677bd56d..2269ebc60c8af 100644
--- a/build/config/compiler/BUILD.gn
+++ b/build/config/compiler/BUILD.gn
@@ -1783,7 +1783,7 @@ config("clang_revision") {
     }
 
     if (toolchain_has_rust && _perform_consistency_checks &&
-        !rust_force_head_revision) {
+        use_chromium_rust_toolchain && !rust_force_head_revision) {
       # Ensure that the synced rust version matches what's in git.
       _rust_revision_lines =
           filter_include(read_file("//tools/rust/update_rust.py", "list lines"),
-- 
2.51.2

